---
import wordnikLogo from '~assets/wordnik-gearheart.png';
import SiteLink from '~components/SiteLink.astro';
import { getBrowseWordsUrl } from '~astro-utils/url-utils';
import { t } from '~utils/i18n-utils';

const currentYear = new Date().getFullYear();
const attributionUrl = import.meta.env.SITE_AUTHOR_URL;
const authorName = import.meta.env.SITE_AUTHOR;
const attributionMessage = import.meta.env.SITE_ATTRIBUTION_MESSAGE;
const showAttribution = attributionUrl && authorName && attributionMessage;
---

<footer class="footer" role="contentinfo">
  <nav class="footer__nav">
    <ul class="footer__links">
      <li class="footer__item">
        <SiteLink href="/">{t('nav.home')}</SiteLink>
      </li>
      <li class="footer__item">
        <SiteLink href={getBrowseWordsUrl()}>{t('nav.browse_words')}</SiteLink>
      </li>
      <li class="footer__item">
        <SiteLink href="/word">{t('browse.all_words')}</SiteLink>
      </li>
      <li class="footer__item">
        <SiteLink href="/stats">{t('nav.stats')}</SiteLink>
      </li>
      {showAttribution && (
        <li class="footer__item">
          <SiteLink
            href={attributionUrl}
            target="_blank"
          >
            {attributionMessage}, {currentYear}
          </SiteLink>
        </li>
      )}
      <li class="footer__item">
        <SiteLink
          href="https://www.wordnik.com"
          target="_blank"
          class="footer__wordnik"
          title={t('footer.powered_by')}
        >
          <img src={wordnikLogo.src} alt="Wordnik" width="16" height="16" />
        </SiteLink>
      </li>
    </ul>
  </nav>
</footer>

<style>
    .footer {
        margin-top: auto;
        padding: 1rem;
        text-align: center;
    }

    .footer__nav {
        margin: 0 auto;
    }

    .footer__links {
        margin: 0 auto;
        padding: 0;
        list-style: none;
        font-size: 0.875rem;
        color: var(--color-text-light);
        line-height: 2;
        max-width: fit-content;
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        justify-content: center;
        align-items: center;
    }

    .footer__item {
        white-space: nowrap;
        display: flex;
        align-items: center;
    }

    .footer__item:not(:last-child)::after {
        content: "â€¢";
        margin-left: 0.75rem;
        opacity: 0.5;
    }

    .footer__links a {
        color: inherit;
    }

    :global(.footer__wordnik) {
        display: flex;
        align-items: center;
        opacity: 0.8;
        filter: grayscale(1);
        transition: opacity 0.2s ease;
    }

    :global(.footer__wordnik:hover) {
        opacity: 1;
        filter: none;
    }

</style>
